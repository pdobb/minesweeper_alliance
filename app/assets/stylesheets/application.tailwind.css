@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply font-mono;
  }

  body {
    @apply dark:bg-neutral-800 dark:text-gray-300;
  }

  a,
  .a {
    @apply underline underline-offset-4
      hover:text-red-700 dark:hover:text-red-600;
  }

  header,
  footer {
    nav a {
      @apply py-2;
    }
  }
  nav a {
    @apply border-2 border-transparent no-underline;

    &.active,
    &:hover {
      @apply border-b-red-700 no-underline dark:border-b-red-600;
    }
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-bold;
  }

  h1,
  .h1 {
    @apply text-3xl normal-case;
  }
  h2,
  .h2 {
    @apply text-2xl normal-case;
  }
  h3,
  .h3 {
    @apply text-xl uppercase;
  }
  h4,
  .h4 {
    @apply text-lg normal-case;
  }
  h5,
  .h5 {
    @apply text-base normal-case;
  }
  h6,
  .h6 {
    @apply text-base normal-case;
  }

  dfn {
    @apply underline underline-offset-2 decoration-dashed not-italic;
  }
}

@layer components {
  a[href^="http"] {
    @apply whitespace-nowrap;

    &::after {
      @apply content-['']
        ml-1.5 size-[.8em] inline-block hover:opacity-70
        bg-contain bg-external-link-light dark:bg-external-link-dark;
    }
  }

  .btn-basic {
    @apply cursor-pointer no-underline hover:opacity-80;
  }
  .btn-primary {
    @apply cursor-pointer select-none no-underline whitespace-nowrap
      border border-2
      border-gray-800 dark:border-gray-400
      px-4 py-1;

    &:hover,
    &:disabled {
      @apply ring ring-1
        ring-red-700 dark:ring-red-600
        border-red-700 dark:border-red-600;
    }
    &:disabled {
      @apply text-red-600 dark:text-red-600;
    }
  }

  .form-input,
  .form-select {
    @apply bg-transparent focus:ring-0;

    &,
    &:focus {
      @apply border-transparent;
    }
  }
  .form-input {
    &,
    &:focus {
      @apply border-b-red-800 dark:border-b-red-600;
    }
  }
  .form-error {
    @apply text-red-600 dark:selection:bg-[#469dff];
  }

  /*
    CSS Tooltips (based on balloon-css)
    Example Usage:
      <dfn
        data-tooltip="up-left"
        aria-label="..."
        class="after:w-80"
      >...</dfn>
  */
  [data-tooltip] {
    @apply relative cursor-pointer;

    &::before,
    &::after {
      @apply pointer-events-none
        absolute z-10
        opacity-0 hover:opacity-100
        transition-all duration-150 ease-out delay-150;
    }
    &::before {
      @apply size-3 content-[""] rotate-45 bg-neutral-900;
    }
    &::after {
      @apply content-[attr(aria-label)] my-1.5 p-4 rounded-md
        bg-neutral-900 font-normal text-gray-200;
    }

    &[data-tooltip="up"]:hover::before,
    &[data-tooltip="up"]:hover::after,
    &[data-tooltip="down"]:hover::before,
    &[data-tooltip="down"]:hover::after {
      @apply -translate-x-1/2;
    }
    &[data-tooltip="up"]:before,
    &[data-tooltip="up"]:after {
      @apply left-1/2 translate-y-1;
    }
    &[data-tooltip="down"]:after,
    &[data-tooltip="down"]:before {
      @apply left-1/2 -translate-y-1;
    }

    &[data-tooltip^="up"]::before,
    &[data-tooltip^="up"]::after {
      @apply bottom-full origin-top -translate-y-1;
    }

    &[data-tooltip^="down"]::before,
    &[data-tooltip^="down"]::after {
      @apply top-full -translate-y-1;
    }

    &[data-tooltip="left"]:hover::before,
    &[data-tooltip="left"]:hover::after,
    &[data-tooltip="right"]:hover::before,
    &[data-tooltip="right"]:hover::after {
      @apply -translate-y-1/2;
    }
    &[data-tooltip="left"]::after {
      @apply mr-2.5;
    }
    &[data-tooltip="right"]::after {
      @apply ml-2.5;
    }

    &[data-tooltip*="-left"]:hover::before,
    &[data-tooltip*="-left"]:hover::after,
    &[data-tooltip*="-right"]:hover::before,
    &[data-tooltip*="-right"]:hover::after {
      @apply translate-x-0;
    }
    &[data-tooltip*="-left"]::before {
      @apply left-2.5;
    }
    &[data-tooltip*="-left"]::after {
      @apply left-0;
    }
    &[data-tooltip*="-right"]::before {
      @apply right-2.5;
    }
    &[data-tooltip*="-right"]::after {
      @apply right-0;
    }
  }
}
